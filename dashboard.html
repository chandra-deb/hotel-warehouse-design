<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Inventory Management System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f5f6fa;
            padding: 20px;
        }

        .dashboard-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 15px;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }

        .chart-container, .gauge-container, .line-chart-container, 
        .radar-chart-container, .funnel-chart-container {
            padding: 15px;
            margin-bottom: 15px;
        }

        .inventory-chart {
            height: 250px;
            display: flex;
            gap: 8px;
            align-items: flex-end;
            padding: 15px 0;
            margin-bottom: 30px;
        }

        .bar {
            flex: 1;
            position: relative;
            transition: all 0.3s ease;
            min-width: 40px;
            cursor: pointer;
            height: 100%;
        }

        .bar:hover {
            transform: translateY(-5px);
        }

        .bar:hover .bar-tooltip {
            opacity: 1;
            visibility: visible;
        }

        .bar-inner {
            width: 100%;
            position: absolute;
            bottom: 0;
            border-radius: 6px 6px 0 0;
            transition: height 0.3s ease;
        }

        .bar:hover .bar-inner {
            filter: brightness(1.1);
        }

        .bar-tooltip {
            position: absolute;
            top: -70px;
            left: 50%;
            transform: translateX(-50%);
            background: #2d3436;
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.85rem;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            white-space: nowrap;
            z-index: 10;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .bar-tooltip::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 50%;
            transform: translateX(-50%);
            border-left: 6px solid transparent;
            border-right: 6px solid transparent;
            border-top: 6px solid #2d3436;
        }

        .bar-label {
            position: absolute;
            bottom: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.8rem;
            color: #636e72;
            white-space: nowrap;
        }

        .bar-value {
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.8rem;
            color: #2d3436;
        }

        .legend {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin-top: 15px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.9rem;
            color: #636e72;
        }

        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: 3px;
        }

        /* Gauge Chart Styles */
        .gauge-container {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            margin-bottom: 20px;
            text-align: center;
        }

        .gauge-wrapper {
            position: relative;
            width: 180px;
            height: 90px;
            margin: 15px auto;
            overflow: hidden;
            cursor: pointer;
        }

        .gauge {
            width: 180px;
            height: 180px;
            border-radius: 50%;
            position: relative;
            background: #f0f0f0;
            overflow: hidden;
        }

        .gauge-fill {
            position: absolute;
            top: 0;
            left: 0;
            width: 180px;
            height: 180px;
            transform-origin: 50% 100%;
            transition: transform 1s ease-out;
            background: conic-gradient(
                #4834d4 0%,
                #00b894 33%,
                #fdcb6e 66%,
                #ff7675 100%
            );
        }

        .gauge-cover {
            width: 144px;
            height: 72px;
            background: white;
            border-radius: 100px 100px 0 0;
            position: absolute;
            top: 9px;
            left: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding-bottom: 10px;
            box-shadow: inset 0 -2px 5px rgba(0,0,0,0.1);
        }

        .gauge-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: #2d3436;
        }

        .gauge-label {
            font-size: 0.9rem;
            color: #636e72;
            margin-top: 10px;
        }

        .alert-status {
            margin-top: 15px;
            padding: 8px 16px;
            border-radius: 20px;
            display: inline-block;
            font-weight: 500;
        }

        .alert-status.critical {
            background: #ffe9e9;
            color: #ff4757;
        }

        .alert-status.warning {
            background: #fff3e0;
            color: #f39c12;
        }

        .alert-status.good {
            background: #e8f5e9;
            color: #2ecc71;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .gauge-tooltip {
            position: absolute;
            top: -70px;
            left: 50%;
            transform: translateX(-50%);
            background: #2d3436;
            color: white;
            padding: 12px 16px;
            border-radius: 8px;
            font-size: 0.9rem;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 100;
            width: max-content;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
        }

        .gauge-tooltip::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 50%;
            transform: translateX(-50%);
            border-left: 6px solid transparent;
            border-right: 6px solid transparent;
            border-top: 6px solid #2d3436;
        }

        .gauge-wrapper:hover .gauge-tooltip {
            opacity: 1;
            visibility: visible;
        }

        .line-chart-container {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            margin-bottom: 20px;
            grid-column: 1 / -1;  /* Make it span full width */
        }

        .line-chart {
            width: 100%;
            height: 300px;
            position: relative;
            padding: 20px 0;
        }

        .line-chart-svg {
            width: 100%;
            height: 100%;
        }

        .line-path {
            fill: none;
            stroke-width: 2;
            transition: all 0.3s ease;
        }

        .chart-point {
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .chart-point:hover {
            r: 6;
        }

        .axis-line {
            stroke: #dfe6e9;
            stroke-width: 1;
        }

        .axis-text {
            font-size: 12px;
            fill: #636e72;
        }

        .radar-chart-container {
            background: white;
            border-radius: 12px;
            padding: 30px;  /* Increased padding */
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            margin-bottom: 20px;
            grid-column: 1 / -1;  /* Make it span full width like the line chart */
        }

        .radar-chart {
            width: 100%;
            height: 400px;  /* Increased height */
            position: relative;
            margin: 20px 0;  /* Added margin */
        }

        .radar-chart-svg {
            width: 100%;
            height: 100%;
        }

        .radar-area {
            fill-opacity: 0.3;
            stroke-width: 2;
            transition: all 0.3s ease;
        }

        .radar-area:hover {
            fill-opacity: 0.5;
        }

        .radar-point {
            fill: white;
            stroke-width: 2;
            cursor: pointer;
            transition: all 0.3s ease;
            r: 5;  /* Made points slightly bigger */
        }

        .radar-point:hover {
            r: 7;  /* Increased hover size */
        }

        .radar-axis {
            stroke: #dfe6e9;
            stroke-width: 1;
        }

        .radar-circle {
            fill: none;
            stroke: #dfe6e9;
            stroke-width: 1;
            stroke-dasharray: 4 4;
        }

        .radar-label {
            font-size: 14px;  /* Increased font size */
            fill: #636e72;
            font-weight: 500;  /* Made labels bolder */
        }

        .radar-value {
            font-size: 14px;  /* Increased from 12px */
            fill: #2d3436;
            font-weight: 500;  /* Added font weight */
        }

        /* Add new styles for the radar tooltip */
        .radar-tooltip {
            fill: white;
            font-size: 14px;
            font-weight: 500;
        }

        .radar-tooltip-bg {
            fill: #2d3436;
            rx: 4;
            ry: 4;
            opacity: 0.9;
        }

        .funnel-chart-container {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            margin-bottom: 20px;
            grid-column: 1 / -1;
        }

        .funnel-chart {
            width: 100%;
            height: 400px;
            position: relative;
            margin: 20px 0;
        }

        .funnel-chart-svg {
            width: 100%;
            height: 100%;
        }

        .funnel-section {
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .funnel-section:hover {
            opacity: 0.8;
            transform: translateX(5px);
        }

        .funnel-label {
            font-size: 14px;
            fill: #2d3436;
            font-weight: 500;
        }

        .funnel-value {
            font-size: 14px;
            fill: white;
            font-weight: 600;
        }

        .funnel-tooltip {
            position: absolute;
            background: #2d3436;
            color: white;
            padding: 10px 14px;
            border-radius: 8px;
            font-size: 14px;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 100;
            pointer-events: none;
        }

        .stacked-chart-container {
            background: white;
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            margin-bottom: 15px;
            grid-column: 1 / -1;
        }

        .stacked-chart {
            width: 100%;
            height: 350px;
            position: relative;
            margin: 15px 0;
        }

        .stacked-chart-svg {
            width: 100%;
            height: 100%;
        }

        .stacked-bar {
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .stacked-bar:hover {
            filter: brightness(1.1);
        }

        .stacked-tooltip {
            position: absolute;
            background: #2d3436;
            color: white;
            padding: 10px 14px;
            border-radius: 8px;
            font-size: 14px;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 100;
            pointer-events: none;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
        }

        .turnover-chart-container {
            background: white;
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            margin-bottom: 15px;
            grid-column: 1 / -1;
        }

        .turnover-chart {
            width: 100%;
            height: 350px;
            position: relative;
            margin: 15px 0;
        }

        .turnover-chart-svg {
            width: 100%;
            height: 100%;
        }

        .turnover-line {
            fill: none;
            stroke-width: 2.5;
            transition: all 0.3s ease;
        }

        .turnover-point {
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .turnover-point:hover {
            r: 6;
        }

        .turnover-tooltip {
            position: absolute;
            background: #2d3436;
            color: white;
            padding: 10px 14px;
            border-radius: 8px;
            font-size: 14px;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 100;
            pointer-events: none;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <div class="dashboard-grid">
            <div class="chart-container">
                <div class="chart-header">
                    <h2 class="chart-title">Inventory Status</h2>
                </div>
                <div class="inventory-chart" id="inventoryChart">
                    <!-- Bars will be added dynamically via JavaScript -->
                </div>
                <div class="legend" id="chartLegend">
                    <!-- Legend items will be added dynamically -->
                </div>
            </div>
            <div class="gauge-container">
                <div class="chart-header">
                    <h2 class="chart-title">Stock Level Alerts</h2>
                </div>
                <div class="gauge-wrapper">
                    <div class="gauge-tooltip" id="gaugeTooltip">
                        <!-- Tooltip content will be added dynamically -->
                    </div>
                    <div class="gauge">
                        <div class="gauge-fill" id="gaugeFill"></div>
                        <div class="gauge-cover">
                            <div class="gauge-value" id="gaugeValue">0%</div>
                        </div>
                    </div>
                </div>
                <div class="gauge-label">Items Below Safety Stock</div>
                <div id="alertStatus" class="alert-status">Calculating...</div>
            </div>
            <div class="line-chart-container">
                <div class="chart-header">
                    <h2 class="chart-title">Item Movement Trends</h2>
                </div>
                <div class="line-chart">
                    <svg class="line-chart-svg" id="lineChart"></svg>
                </div>
            </div>
            <div class="radar-chart-container">
                <div class="chart-header">
                    <h2 class="chart-title">Supplier Performance Metrics</h2>
                </div>
                <div class="radar-chart">
                    <svg class="radar-chart-svg" id="radarChart"></svg>
                </div>
            </div>
            <div class="funnel-chart-container">
                <div class="chart-header">
                    <h2 class="chart-title">Purchase Order Status Overview</h2>
                </div>
                <div class="funnel-chart">
                    <svg class="funnel-chart-svg" id="funnelChart"></svg>
                </div>
            </div>
            <div class="stacked-chart-container">
                <div class="chart-header">
                    <h2 class="chart-title">Interdepartmental Requests</h2>
                </div>
                <div class="stacked-chart">
                    <svg class="stacked-chart-svg" id="stackedChart"></svg>
                </div>
                <div class="legend" id="stackedChartLegend"></div>
            </div>
            <div class="turnover-chart-container">
                <div class="chart-header">
                    <h2 class="chart-title">Inventory Turnover Rate</h2>
                </div>
                <div class="turnover-chart">
                    <svg class="turnover-chart-svg" id="turnoverChart"></svg>
                </div>
                <div class="legend" id="turnoverLegend"></div>
            </div>
        </div>
    </div>

    <script>
        // Sample inventory data with more details and safety stock levels
        const inventoryData = [
            { 
                category: 'Electronics', 
                stock: 150,
                safetyStock: 100,
                value: '$15,000',
                lastUpdated: '2 hours ago',
                status: 'Good Stock',
                color: '#4834d4'
            },
            { 
                category: 'Furniture', 
                stock: 80,
                safetyStock: 100,
                value: '$24,000',
                lastUpdated: '1 day ago',
                status: 'Low Stock',
                color: '#00b894'
            },
            { 
                category: 'Clothing', 
                stock: 200,
                safetyStock: 150,
                value: '$10,000',
                lastUpdated: '5 hours ago',
                status: 'Overstocked',
                color: '#ff7675'
            },
            { 
                category: 'Books', 
                stock: 120,
                safetyStock: 90,
                value: '$6,000',
                lastUpdated: '3 hours ago',
                status: 'Good Stock',
                color: '#fdcb6e'
            },
            { 
                category: 'Sports', 
                stock: 90,
                safetyStock: 120,
                value: '$9,000',
                lastUpdated: '1 hour ago',
                status: 'Low Stock',
                color: '#6c5ce7'
            }
        ];

        function createInventoryChart() {
            const chartContainer = document.getElementById('inventoryChart');
            const legendContainer = document.getElementById('chartLegend');
            const maxStock = Math.max(...inventoryData.map(item => item.stock));
            
            // Clear existing content
            chartContainer.innerHTML = '';
            legendContainer.innerHTML = '';
            
            inventoryData.forEach(item => {
                const bar = document.createElement('div');
                bar.className = 'bar';
                
                // Create bar inner for color
                const barInner = document.createElement('div');
                barInner.className = 'bar-inner';
                const height = (item.stock / maxStock) * 100;
                barInner.style.height = `${height}%`;
                barInner.style.backgroundColor = item.color;

                // Create tooltip with more information
                const tooltip = document.createElement('div');
                tooltip.className = 'bar-tooltip';
                tooltip.innerHTML = `
                    <strong>${item.category}</strong><br>
                    Stock: ${item.stock} units<br>
                    Value: ${item.value}<br>
                    Status: ${item.status}<br>
                    Updated: ${item.lastUpdated}
                `;

                const label = document.createElement('div');
                label.className = 'bar-label';
                label.textContent = item.category;

                const value = document.createElement('div');
                value.className = 'bar-value';
                value.textContent = item.stock;

                bar.appendChild(barInner);
                bar.appendChild(tooltip);
                bar.appendChild(label);
                bar.appendChild(value);
                chartContainer.appendChild(bar);

                // Add legend item
                const legendItem = document.createElement('div');
                legendItem.className = 'legend-item';
                legendItem.innerHTML = `
                    <div class="legend-color" style="background: ${item.color};"></div>
                    <span>${item.category}</span>
                `;
                legendContainer.appendChild(legendItem);
            });
        }

        function updateGauge() {
            const itemsBelowSafety = inventoryData.filter(item => item.stock < item.safetyStock);
            const percentage = (itemsBelowSafety.length / inventoryData.length) * 100;
            
            // Update gauge fill
            const gaugeFill = document.getElementById('gaugeFill');
            const gaugeValue = document.getElementById('gaugeValue');
            const alertStatus = document.getElementById('alertStatus');
            const gaugeTooltip = document.getElementById('gaugeTooltip');
            
            // Fix: Adjust the rotation calculation
            const rotation = (percentage / 100) * 180;
            gaugeFill.style.transform = `rotate(${rotation}deg)`;
            
            // Update the percentage text
            gaugeValue.textContent = `${Math.round(percentage)}%`;
            
            // Update alert status
            let statusText, statusClass;
            if (percentage >= 60) {
                statusText = 'Critical Alert';
                statusClass = 'critical';
            } else if (percentage >= 30) {
                statusText = 'Warning';
                statusClass = 'warning';
            } else {
                statusText = 'Good';
                statusClass = 'good';
            }
            
            alertStatus.textContent = statusText;
            alertStatus.className = `alert-status ${statusClass}`;

            // Create tooltip content
            const tooltipContent = `
                <strong>Stock Alert Details</strong><br>
                Items Below Safety Stock: ${itemsBelowSafety.length}<br>
                Total Categories: ${inventoryData.length}<br><br>
                Critical Items:<br>
                ${itemsBelowSafety.map(item => `
                    • ${item.category}: ${item.stock}/${item.safetyStock} units
                `).join('')}
            `;
            
            gaugeTooltip.innerHTML = tooltipContent;
        }

        // Add this sample data for the line chart
        const movementData = {
            Electronics: [
                { month: 'Jan', value: 120 },
                { month: 'Feb', value: 150 },
                { month: 'Mar', value: 180 },
                { month: 'Apr', value: 140 },
                { month: 'May', value: 160 },
                { month: 'Jun', value: 190 }
            ],
            Furniture: [
                { month: 'Jan', value: 80 },
                { month: 'Feb', value: 100 },
                { month: 'Mar', value: 90 },
                { month: 'Apr', value: 110 },
                { month: 'May', value: 130 },
                { month: 'Jun', value: 120 }
            ],
            Clothing: [
                { month: 'Jan', value: 160 },
                { month: 'Feb', value: 140 },
                { month: 'Mar', value: 170 },
                { month: 'Apr', value: 190 },
                { month: 'May', value: 180 },
                { month: 'Jun', value: 200 }
            ]
        };

        function createLineChart() {
            const svg = document.getElementById('lineChart');
            const width = svg.clientWidth;
            const height = svg.clientHeight;
            const padding = 40;
            
            // Clear previous content
            svg.innerHTML = '';
            
            // Find max value for scaling
            const maxValue = Math.max(...Object.values(movementData)
                .flat()
                .map(item => item.value));
            
            // Create scales
            const xScale = (width - padding * 2) / 5;  // 6 months - 1 for spacing
            const yScale = (height - padding * 2) / maxValue;
            
            // Draw axes
            const axisGroup = document.createElementNS('http://www.w3.org/2000/svg', 'g');
            
            // X-axis
            const xAxis = document.createElementNS('http://www.w3.org/2000/svg', 'line');
            xAxis.setAttribute('x1', padding);
            xAxis.setAttribute('y1', height - padding);
            xAxis.setAttribute('x2', width - padding);
            xAxis.setAttribute('y2', height - padding);
            xAxis.setAttribute('class', 'axis-line');
            axisGroup.appendChild(xAxis);
            
            // Y-axis
            const yAxis = document.createElementNS('http://www.w3.org/2000/svg', 'line');
            yAxis.setAttribute('x1', padding);
            yAxis.setAttribute('y1', padding);
            yAxis.setAttribute('x2', padding);
            yAxis.setAttribute('y2', height - padding);
            yAxis.setAttribute('class', 'axis-line');
            axisGroup.appendChild(yAxis);
            
            // Add month labels
            movementData.Electronics.forEach((item, index) => {
                const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                text.setAttribute('x', padding + index * xScale);
                text.setAttribute('y', height - padding + 20);
                text.setAttribute('class', 'axis-text');
                text.textContent = item.month;
                axisGroup.appendChild(text);
            });
            
            // Add value labels
            for (let i = 0; i <= 5; i++) {
                const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                text.setAttribute('x', padding - 25);
                text.setAttribute('y', height - padding - (i * (height - padding * 2) / 5));
                text.setAttribute('class', 'axis-text');
                text.textContent = Math.round(i * maxValue / 5);
                axisGroup.appendChild(text);
            }
            
            svg.appendChild(axisGroup);
            
            // Draw lines for each category
            Object.entries(movementData).forEach(([category, data], categoryIndex) => {
                const color = inventoryData.find(item => item.category === category)?.color || '#000';
                
                // Create the line path
                let pathD = `M ${padding + 0 * xScale} ${height - padding - data[0].value * yScale}`;
                data.forEach((item, index) => {
                    if (index > 0) {
                        pathD += ` L ${padding + index * xScale} ${height - padding - item.value * yScale}`;
                    }
                });
                
                const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                path.setAttribute('d', pathD);
                path.setAttribute('class', 'line-path');
                path.setAttribute('stroke', color);
                svg.appendChild(path);
                
                // Add points
                data.forEach((item, index) => {
                    const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
                    circle.setAttribute('cx', padding + index * xScale);
                    circle.setAttribute('cy', height - padding - item.value * yScale);
                    circle.setAttribute('r', 4);
                    circle.setAttribute('fill', color);
                    circle.setAttribute('class', 'chart-point');
                    
                    // Add tooltip on hover
                    circle.addEventListener('mouseover', (e) => {
                        const tooltip = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                        tooltip.setAttribute('x', padding + index * xScale);
                        tooltip.setAttribute('y', height - padding - item.value * yScale - 10);
                        tooltip.setAttribute('text-anchor', 'middle');
                        tooltip.setAttribute('class', 'axis-text');
                        tooltip.textContent = `${category}: ${item.value}`;
                        tooltip.id = 'point-tooltip';
                        svg.appendChild(tooltip);
                    });
                    
                    circle.addEventListener('mouseout', () => {
                        const tooltip = document.getElementById('point-tooltip');
                        if (tooltip) tooltip.remove();
                    });
                    
                    svg.appendChild(circle);
                });
            });
        }

        // Add sample supplier performance data
        const supplierData = [
            {
                name: 'Supplier A',
                metrics: {
                    'Delivery Time': 85,
                    'Quality': 90,
                    'Price': 75,
                    'Communication': 88,
                    'Reliability': 92
                },
                color: '#4834d4'
            },
            {
                name: 'Supplier B',
                metrics: {
                    'Delivery Time': 78,
                    'Quality': 85,
                    'Price': 90,
                    'Communication': 72,
                    'Reliability': 85
                },
                color: '#00b894'
            },
            {
                name: 'Supplier C',
                metrics: {
                    'Delivery Time': 92,
                    'Quality': 78,
                    'Price': 85,
                    'Communication': 95,
                    'Reliability': 88
                },
                color: '#ff7675'
            }
        ];

        function createRadarChart() {
            const svg = document.getElementById('radarChart');
            const width = svg.clientWidth;
            const height = svg.clientHeight;
            const centerX = width / 2;
            const centerY = height / 2;
            const radius = Math.min(centerX, centerY) - 80;  // Increased padding from edges
            
            // Clear previous content
            svg.innerHTML = '';
            
            const metrics = Object.keys(supplierData[0].metrics);
            const angleStep = (Math.PI * 2) / metrics.length;
            
            // Create background circles
            for (let i = 1; i <= 5; i++) {
                const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
                circle.setAttribute('cx', centerX);
                circle.setAttribute('cy', centerY);
                circle.setAttribute('r', radius * i / 5);
                circle.setAttribute('class', 'radar-circle');
                svg.appendChild(circle);
                
                // Add value labels
                const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                text.setAttribute('x', centerX + 5);
                text.setAttribute('y', centerY - (radius * i / 5));
                text.setAttribute('class', 'radar-value');
                text.textContent = `${i * 20}`;
                svg.appendChild(text);
            }
            
            // Create axes and labels
            metrics.forEach((metric, i) => {
                const angle = i * angleStep - Math.PI / 2;
                const x = centerX + Math.cos(angle) * radius;
                const y = centerY + Math.sin(angle) * radius;
                
                // Draw axis
                const axis = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                axis.setAttribute('x1', centerX);
                axis.setAttribute('y1', centerY);
                axis.setAttribute('x2', x);
                axis.setAttribute('y2', y);
                axis.setAttribute('class', 'radar-axis');
                svg.appendChild(axis);
                
                // Add label
                const label = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                const labelX = centerX + Math.cos(angle) * (radius + 30);  // Increased label distance
                const labelY = centerY + Math.sin(angle) * (radius + 30);  // Increased label distance
                label.setAttribute('x', labelX);
                label.setAttribute('y', labelY);
                label.setAttribute('text-anchor', 'middle');
                label.setAttribute('class', 'radar-label');
                label.textContent = metric;
                svg.appendChild(label);
            });
            
            // Draw supplier data
            supplierData.forEach(supplier => {
                const points = metrics.map((metric, i) => {
                    const angle = i * angleStep - Math.PI / 2;
                    const value = supplier.metrics[metric];
                    const distance = (radius * value) / 100;
                    return {
                        x: centerX + Math.cos(angle) * distance,
                        y: centerY + Math.sin(angle) * distance,
                        value
                    };
                });
                
                // Create area
                let pathD = `M ${points[0].x} ${points[0].y}`;
                points.forEach((point, i) => {
                    if (i > 0) {
                        pathD += ` L ${point.x} ${point.y}`;
                    }
                });
                pathD += ' Z';
                
                const area = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                area.setAttribute('d', pathD);
                area.setAttribute('class', 'radar-area');
                area.setAttribute('fill', supplier.color);
                area.setAttribute('stroke', supplier.color);
                svg.appendChild(area);
                
                // Add points with tooltips
                points.forEach((point, i) => {
                    const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
                    circle.setAttribute('cx', point.x);
                    circle.setAttribute('cy', point.y);
                    circle.setAttribute('r', 4);
                    circle.setAttribute('class', 'radar-point');
                    circle.setAttribute('stroke', supplier.color);
                    
                    // Add tooltip on hover
                    circle.addEventListener('mouseover', () => {
                        // Create tooltip group
                        const tooltipGroup = document.createElementNS('http://www.w3.org/2000/svg', 'g');
                        tooltipGroup.id = 'radar-tooltip';

                        // Calculate tooltip text for sizing
                        const tooltipText = `${supplier.name}: ${point.value}%`;
                        
                        // Create background
                        const bg = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
                        bg.setAttribute('class', 'radar-tooltip-bg');
                        bg.setAttribute('x', point.x - 60);  // Wider background
                        bg.setAttribute('y', point.y - 30);  // Higher position
                        bg.setAttribute('width', 120);  // Fixed width
                        bg.setAttribute('height', 25);
                        tooltipGroup.appendChild(bg);

                        // Create text
                        const tooltip = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                        tooltip.setAttribute('x', point.x);
                        tooltip.setAttribute('y', point.y - 13);  // Adjusted position
                        tooltip.setAttribute('text-anchor', 'middle');
                        tooltip.setAttribute('class', 'radar-tooltip');
                        tooltip.textContent = tooltipText;
                        tooltipGroup.appendChild(tooltip);

                        svg.appendChild(tooltipGroup);
                    });
                    
                    circle.addEventListener('mouseout', () => {
                        const tooltip = document.getElementById('radar-tooltip');
                        if (tooltip) tooltip.remove();
                    });
                    
                    svg.appendChild(circle);
                });
            });
        }

        // Add sample purchase order data
        const purchaseOrderData = [
            {
                stage: 'Purchase Requests',
                count: 120,
                color: '#4834d4',
                details: 'Total purchase requests initiated'
            },
            {
                stage: 'Approved Orders',
                count: 95,
                color: '#00b894',
                details: 'Requests approved by management'
            },
            {
                stage: 'Sent to Supplier',
                count: 80,
                color: '#fdcb6e',
                details: 'Orders transmitted to suppliers'
            },
            {
                stage: 'Confirmed',
                count: 65,
                color: '#ff7675',
                details: 'Orders confirmed by suppliers'
            },
            {
                stage: 'Delivered',
                count: 50,
                color: '#6c5ce7',
                details: 'Orders successfully delivered'
            }
        ];

        function createFunnelChart() {
            const svg = document.getElementById('funnelChart');
            const width = svg.clientWidth;
            const height = svg.clientHeight;
            const padding = 60;
            const maxWidth = width - (padding * 2);
            const sectionHeight = (height - padding * 2) / purchaseOrderData.length;
            
            // Clear previous content
            svg.innerHTML = '';
            
            const maxCount = Math.max(...purchaseOrderData.map(d => d.count));
            
            purchaseOrderData.forEach((data, index) => {
                const topWidth = maxWidth * (index === 0 ? 1 : purchaseOrderData[index - 1].count / maxCount);
                const bottomWidth = maxWidth * (data.count / maxCount);
                const y = padding + (index * sectionHeight);
                
                // Calculate points for trapezoid
                const points = [
                    `${(width - topWidth) / 2},${y}`,
                    `${(width + topWidth) / 2},${y}`,
                    `${(width + bottomWidth) / 2},${y + sectionHeight}`,
                    `${(width - bottomWidth) / 2},${y + sectionHeight}`
                ].join(' ');
                
                // Create funnel section
                const section = document.createElementNS('http://www.w3.org/2000/svg', 'polygon');
                section.setAttribute('points', points);
                section.setAttribute('fill', data.color);
                section.setAttribute('class', 'funnel-section');
                
                // Add hover effect with tooltip
                section.addEventListener('mouseover', (e) => {
                    const tooltip = document.createElement('div');
                    tooltip.className = 'funnel-tooltip';
                    tooltip.style.position = 'absolute';
                    tooltip.style.left = `${e.pageX + 10}px`;
                    tooltip.style.top = `${e.pageY - 10}px`;
                    tooltip.innerHTML = `
                        <strong>${data.stage}</strong><br>
                        Count: ${data.count}<br>
                        ${data.details}
                    `;
                    document.body.appendChild(tooltip);
                    
                    // Show tooltip
                    setTimeout(() => {
                        tooltip.style.opacity = '1';
                        tooltip.style.visibility = 'visible';
                    }, 0);
                });
                
                section.addEventListener('mousemove', (e) => {
                    const tooltip = document.querySelector('.funnel-tooltip');
                    if (tooltip) {
                        tooltip.style.left = `${e.pageX + 10}px`;
                        tooltip.style.top = `${e.pageY - 10}px`;
                    }
                });
                
                section.addEventListener('mouseout', () => {
                    const tooltip = document.querySelector('.funnel-tooltip');
                    if (tooltip) {
                        tooltip.remove();
                    }
                });
                
                svg.appendChild(section);
                
                // Add labels
                const labelX = width / 2;
                const labelY = y + (sectionHeight / 2);
                
                // Stage label
                const stageLabel = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                stageLabel.setAttribute('x', width - padding + 20);
                stageLabel.setAttribute('y', labelY);
                stageLabel.setAttribute('class', 'funnel-label');
                stageLabel.textContent = data.stage;
                svg.appendChild(stageLabel);
                
                // Count label
                const countLabel = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                countLabel.setAttribute('x', labelX);
                countLabel.setAttribute('y', labelY);
                countLabel.setAttribute('class', 'funnel-value');
                countLabel.setAttribute('text-anchor', 'middle');
                countLabel.textContent = data.count;
                svg.appendChild(countLabel);
            });
        }

        // Add sample interdepartmental request data
        const departmentData = {
            departments: ['IT', 'HR', 'Finance', 'Operations', 'Marketing', 'Sales', 'R&D', 'Legal'],
            requestTypes: [
                {
                    name: 'Equipment',
                    color: '#4834d4',
                    values: [145, 85, 125, 150, 130, 135, 140, 120]
                },
                {
                    name: 'Office Supplies',
                    color: '#00b894',
                    values: [130, 140, 135, 155, 125, 145, 120, 130]
                },
                {
                    name: 'Professional Services',
                    color: '#fdcb6e',
                    values: [125, 130, 140, 135, 145, 130, 150, 140]
                },
                {
                    name: 'Software Licenses',
                    color: '#ff7675',
                    values: [150, 115, 130, 125, 135, 140, 145, 115]
                },
                {
                    name: 'Training Resources',
                    color: '#6c5ce7',
                    values: [120, 145, 115, 130, 140, 125, 130, 135]
                },
                {
                    name: 'Maintenance',
                    color: '#e17055',
                    values: [135, 120, 145, 140, 130, 135, 125, 130]
                },
                {
                    name: 'Travel & Events',
                    color: '#00cec9',
                    values: [115, 135, 130, 145, 150, 140, 135, 125]
                }
            ]
        };

        function createStackedChart() {
            const svg = document.getElementById('stackedChart');
            const width = svg.clientWidth;
            const height = svg.clientHeight;
            const padding = { top: 40, right: 60, bottom: 40, left: 60 };
            const barPadding = 0.2;
            
            // Clear previous content
            svg.innerHTML = '';
            
            // Calculate total values for each department
            const totals = departmentData.departments.map((_, index) => 
                departmentData.requestTypes.reduce((sum, type) => sum + type.values[index], 0)
            );
            const maxTotal = Math.max(...totals);
            
            // Calculate scales
            const barWidth = (width - padding.left - padding.right) / departmentData.departments.length;
            
            // Create axes
            const axisGroup = document.createElementNS('http://www.w3.org/2000/svg', 'g');
            
            // Y-axis
            const yAxis = document.createElementNS('http://www.w3.org/2000/svg', 'line');
            yAxis.setAttribute('x1', padding.left);
            yAxis.setAttribute('y1', padding.top);
            yAxis.setAttribute('x2', padding.left);
            yAxis.setAttribute('y2', height - padding.bottom);
            yAxis.setAttribute('class', 'axis-line');
            axisGroup.appendChild(yAxis);
            
            // X-axis
            const xAxis = document.createElementNS('http://www.w3.org/2000/svg', 'line');
            xAxis.setAttribute('x1', padding.left);
            xAxis.setAttribute('y1', height - padding.bottom);
            xAxis.setAttribute('x2', width - padding.right);
            xAxis.setAttribute('y2', height - padding.bottom);
            xAxis.setAttribute('class', 'axis-line');
            axisGroup.appendChild(xAxis);
            
            // Add Y-axis labels
            for (let i = 0; i <= 5; i++) {
                const value = Math.round(maxTotal * i / 5);
                const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                text.setAttribute('x', padding.left - 10);
                text.setAttribute('y', height - padding.bottom - ((i * (height - padding.top - padding.bottom)) / 5));
                text.setAttribute('text-anchor', 'end');
                text.setAttribute('alignment-baseline', 'middle');
                text.setAttribute('class', 'axis-text');
                text.textContent = value;
                axisGroup.appendChild(text);
            }
            
            // Add department labels
            departmentData.departments.forEach((dept, i) => {
                const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                text.setAttribute('x', padding.left + (i * barWidth) + (barWidth / 2));
                text.setAttribute('y', height - padding.bottom + 20);
                text.setAttribute('text-anchor', 'middle');
                text.setAttribute('class', 'axis-text');
                text.textContent = dept;
                axisGroup.appendChild(text);
            });
            
            svg.appendChild(axisGroup);
            
            // Create stacked bars
            departmentData.departments.forEach((dept, deptIndex) => {
                let yOffset = 0;
                const availableHeight = height - padding.top - padding.bottom;
                
                departmentData.requestTypes.forEach((type, typeIndex) => {
                    const value = type.values[deptIndex];
                    const barHeight = (value / maxTotal) * availableHeight;
                    const x = padding.left + (deptIndex * barWidth) + (barWidth * barPadding / 2);
                    const y = height - padding.bottom - yOffset - barHeight;
                    const width = barWidth * (1 - barPadding);
                    
                    const rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
                    rect.setAttribute('x', x);
                    rect.setAttribute('y', y);
                    rect.setAttribute('width', width);
                    rect.setAttribute('height', barHeight);
                    rect.setAttribute('fill', type.color);
                    rect.setAttribute('class', 'stacked-bar');
                    
                    // Add hover effect with tooltip
                    rect.addEventListener('mouseover', (e) => {
                        const tooltip = document.createElement('div');
                        tooltip.className = 'stacked-tooltip';
                        tooltip.style.left = `${e.pageX + 10}px`;
                        tooltip.style.top = `${e.pageY - 10}px`;
                        tooltip.innerHTML = `
                            <strong>${dept} - ${type.name}</strong><br>
                            Requests: ${value}
                        `;
                        document.body.appendChild(tooltip);
                        
                        setTimeout(() => {
                            tooltip.style.opacity = '1';
                            tooltip.style.visibility = 'visible';
                        }, 0);
                    });
                    
                    rect.addEventListener('mousemove', (e) => {
                        const tooltip = document.querySelector('.stacked-tooltip');
                        if (tooltip) {
                            tooltip.style.left = `${e.pageX + 10}px`;
                            tooltip.style.top = `${e.pageY - 10}px`;
                        }
                    });
                    
                    rect.addEventListener('mouseout', () => {
                        const tooltip = document.querySelector('.stacked-tooltip');
                        if (tooltip) tooltip.remove();
                    });
                    
                    svg.appendChild(rect);
                    yOffset += barHeight;
                });
            });
            
            // Create legend
            const legendContainer = document.getElementById('stackedChartLegend');
            legendContainer.innerHTML = '';
            
            departmentData.requestTypes.forEach(type => {
                const legendItem = document.createElement('div');
                legendItem.className = 'legend-item';
                legendItem.innerHTML = `
                    <div class="legend-color" style="background: ${type.color};"></div>
                    <span>${type.name}</span>
                `;
                legendContainer.appendChild(legendItem);
            });
        }

        // Add sample turnover rate data
        const turnoverData = {
            categories: ['Electronics', 'Furniture', 'Clothing', 'Books', 'Sports'],
            months: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
            data: {
                Electronics: [4.2, 4.5, 4.8, 4.3, 4.6, 5.0, 4.7, 4.9, 5.2, 4.8, 5.1, 5.3],
                Furniture: [2.1, 2.3, 2.0, 2.4, 2.6, 2.2, 2.5, 2.7, 2.4, 2.8, 2.5, 2.9],
                Clothing: [6.1, 6.4, 6.2, 6.7, 6.5, 6.8, 6.3, 6.9, 7.1, 6.6, 7.0, 7.2],
                Books: [3.5, 3.8, 3.6, 3.9, 3.7, 4.0, 3.8, 4.1, 3.9, 4.2, 4.0, 4.3],
                Sports: [5.1, 5.3, 5.0, 5.4, 5.2, 5.5, 5.3, 5.6, 5.4, 5.7, 5.5, 5.8]
            }
        };

        function createTurnoverChart() {
            const svg = document.getElementById('turnoverChart');
            const width = svg.clientWidth;
            const height = svg.clientHeight;
            const padding = { top: 40, right: 60, bottom: 40, left: 60 };
            
            // Clear previous content
            svg.innerHTML = '';
            
            // Find min and max values for scaling
            const allValues = Object.values(turnoverData.data).flat();
            const minValue = Math.floor(Math.min(...allValues));
            const maxValue = Math.ceil(Math.max(...allValues));
            
            // Calculate scales
            const xScale = (width - padding.left - padding.right) / (turnoverData.months.length - 1);
            const yScale = (height - padding.top - padding.bottom) / (maxValue - minValue);
            
            // Create axes
            const axisGroup = document.createElementNS('http://www.w3.org/2000/svg', 'g');
            
            // Y-axis
            const yAxis = document.createElementNS('http://www.w3.org/2000/svg', 'line');
            yAxis.setAttribute('x1', padding.left);
            yAxis.setAttribute('y1', padding.top);
            yAxis.setAttribute('x2', padding.left);
            yAxis.setAttribute('y2', height - padding.bottom);
            yAxis.setAttribute('class', 'axis-line');
            axisGroup.appendChild(yAxis);
            
            // X-axis
            const xAxis = document.createElementNS('http://www.w3.org/2000/svg', 'line');
            xAxis.setAttribute('x1', padding.left);
            xAxis.setAttribute('y1', height - padding.bottom);
            xAxis.setAttribute('x2', width - padding.right);
            xAxis.setAttribute('y2', height - padding.bottom);
            xAxis.setAttribute('class', 'axis-line');
            axisGroup.appendChild(xAxis);
            
            // Add month labels
            turnoverData.months.forEach((month, i) => {
                const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                text.setAttribute('x', padding.left + (i * xScale));
                text.setAttribute('y', height - padding.bottom + 20);
                text.setAttribute('class', 'axis-text');
                text.setAttribute('text-anchor', 'middle');
                text.textContent = month;
                axisGroup.appendChild(text);
            });
            
            // Add turnover rate labels
            for (let i = 0; i <= 5; i++) {
                const value = minValue + ((maxValue - minValue) * i / 5);
                const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                text.setAttribute('x', padding.left - 10);
                text.setAttribute('y', height - padding.bottom - (i * (height - padding.top - padding.bottom) / 5));
                text.setAttribute('text-anchor', 'end');
                text.setAttribute('alignment-baseline', 'middle');
                text.setAttribute('class', 'axis-text');
                text.textContent = value.toFixed(1);
                axisGroup.appendChild(text);
                
                // Add grid line
                const gridLine = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                gridLine.setAttribute('x1', padding.left);
                gridLine.setAttribute('y1', height - padding.bottom - (i * (height - padding.top - padding.bottom) / 5));
                gridLine.setAttribute('x2', width - padding.right);
                gridLine.setAttribute('y2', height - padding.bottom - (i * (height - padding.top - padding.bottom) / 5));
                gridLine.setAttribute('class', 'axis-line');
                gridLine.setAttribute('stroke-opacity', '0.1');
                axisGroup.appendChild(gridLine);
            }
            
            svg.appendChild(axisGroup);
            
            // Draw lines for each category
            Object.entries(turnoverData.data).forEach(([category, values]) => {
                const color = inventoryData.find(item => item.category === category)?.color || '#000';
                
                // Create the line path
                let pathD = `M ${padding.left} ${height - padding.bottom - ((values[0] - minValue) * yScale)}`;
                values.forEach((value, index) => {
                    if (index > 0) {
                        pathD += ` L ${padding.left + (index * xScale)} ${height - padding.bottom - ((value - minValue) * yScale)}`;
                    }
                });
                
                const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                path.setAttribute('d', pathD);
                path.setAttribute('class', 'turnover-line');
                path.setAttribute('stroke', color);
                svg.appendChild(path);
                
                // Add points with tooltips
                values.forEach((value, index) => {
                    const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
                    const cx = padding.left + (index * xScale);
                    const cy = height - padding.bottom - ((value - minValue) * yScale);
                    
                    circle.setAttribute('cx', cx);
                    circle.setAttribute('cy', cy);
                    circle.setAttribute('r', 4);
                    circle.setAttribute('fill', color);
                    circle.setAttribute('class', 'turnover-point');
                    
                    // Add hover effect with tooltip
                    circle.addEventListener('mouseover', (e) => {
                        const tooltip = document.createElement('div');
                        tooltip.className = 'turnover-tooltip';
                        tooltip.style.left = `${e.pageX + 10}px`;
                        tooltip.style.top = `${e.pageY - 10}px`;
                        tooltip.innerHTML = `
                            <strong>${category}</strong><br>
                            Month: ${turnoverData.months[index]}<br>
                            Turnover Rate: ${value.toFixed(2)}
                        `;
                        document.body.appendChild(tooltip);
                        
                        setTimeout(() => {
                            tooltip.style.opacity = '1';
                            tooltip.style.visibility = 'visible';
                        }, 0);
                    });
                    
                    circle.addEventListener('mousemove', (e) => {
                        const tooltip = document.querySelector('.turnover-tooltip');
                        if (tooltip) {
                            tooltip.style.left = `${e.pageX + 10}px`;
                            tooltip.style.top = `${e.pageY - 10}px`;
                        }
                    });
                    
                    circle.addEventListener('mouseout', () => {
                        const tooltip = document.querySelector('.turnover-tooltip');
                        if (tooltip) tooltip.remove();
                    });
                    
                    svg.appendChild(circle);
                });
            });
            
            // Create legend
            const legendContainer = document.getElementById('turnoverLegend');
            legendContainer.innerHTML = '';
            
            turnoverData.categories.forEach(category => {
                const color = inventoryData.find(item => item.category === category)?.color || '#000';
                const legendItem = document.createElement('div');
                legendItem.className = 'legend-item';
                legendItem.innerHTML = `
                    <div class="legend-color" style="background: ${color};"></div>
                    <span>${category}</span>
                `;
                legendContainer.appendChild(legendItem);
            });
        }

        // Update the window load event listener
        window.addEventListener('load', () => {
            createInventoryChart();
            updateGauge();
            createLineChart();
            createRadarChart();
            createFunnelChart();
            createStackedChart();
            createTurnoverChart();
        });

        // Update the resize listener
        window.addEventListener('resize', () => {
            createLineChart();
            createRadarChart();
            createFunnelChart();
            createStackedChart();
            createTurnoverChart();
        });
    </script>
</body>
</html>
