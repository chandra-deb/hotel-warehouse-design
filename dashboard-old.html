<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analytics Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            display: flex;
            background-color: #f8f9fa;
        }

        .sidebar {
            width: 80px;
            height: 100vh;
            background-color: #111;
            padding: 20px 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: fixed;
        }

        .sidebar-icon {
            width: 40px;
            height: 40px;
            background-color: #2d2d2d;
            border-radius: 10px;
            margin: 10px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            cursor: pointer;
        }

        .sidebar-icon.active {
            background-color: #4361ee;
        }

        .main-content {
            margin-left: 80px;
            padding: 20px;
            width: calc(100% - 80px);
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .stat-card h3 {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 10px;
        }

        .stat-card .value {
            font-size: 1.8rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .stat-card .trend {
            font-size: 0.8rem;
            color: #22c55e;
        }

        .trend.up {
            color: #22c55e;
        }

        .trend.down {
            color: #ef4444;
        }

        .charts-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .chart-container {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            position: relative;
            height: 400px;
            width: 100%;
        }

        canvas {
            width: 100% !important;
            height: 100% !important;
        }

        .chart-tooltip {
            position: absolute;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 8px 12px;
            border-radius: 4px;
            font-size: 14px;
            pointer-events: none;
            display: none;
        }

        .table-container {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        th {
            color: #666;
            font-weight: 500;
        }

        .status {
            padding: 4px 8px;
            border-radius: 20px;
            font-size: 0.8rem;
        }

        .status.completed {
            background: #dcfce7;
            color: #22c55e;
        }

        .status.rejected {
            background: #fee2e2;
            color: #ef4444;
        }
    </style>
</head>
<body>
    <div class="sidebar">
        <div class="sidebar-icon active">üìä</div>
        <div class="sidebar-icon">üì¶</div>
        <div class="sidebar-icon">üìà</div>
        <div class="sidebar-icon">‚öôÔ∏è</div>
    </div>
    
    <div class="main-content">
        <div class="header">
            <h1>Analytics Dashboard</h1>
            <div class="header-actions">
                <input type="search" placeholder="Search..." style="padding: 8px; border-radius: 5px; border: 1px solid #ddd;">
            </div>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <h3>Total Revenue</h3>
                <div class="value">$4,562</div>
                <div class="trend up">+12% vs previous</div>
            </div>
            <div class="stat-card">
                <h3>Total Visitors</h3>
                <div class="value">2,562</div>
                <div class="trend up">+4% vs previous</div>
            </div>
            <div class="stat-card">
                <h3>Total Transactions</h3>
                <div class="value">2,262</div>
                <div class="trend down">-0.89% vs previous</div>
            </div>
            <div class="stat-card">
                <h3>Total Products</h3>
                <div class="value">2,100</div>
                <div class="trend up">+2% vs previous</div>
            </div>
        </div>

        <div class="charts-grid">
            <div class="chart-container">
                <h3>Sales Overview</h3>
                <canvas id="salesChart"></canvas>
            </div>
            <div class="chart-container">
                <h3>Sales by Category</h3>
                <canvas id="categoryChart"></canvas>
            </div>
        </div>

        <div class="table-container">
            <h3>Recent Invoices</h3>
            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Customer</th>
                        <th>Date</th>
                        <th>Amount</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>#065499</td>
                        <td>John Smith</td>
                        <td>04 Sep 2023</td>
                        <td>$100</td>
                        <td><span class="status completed">Completed</span></td>
                    </tr>
                    <tr>
                        <td>#065500</td>
                        <td>Sarah Johnson</td>
                        <td>04 Sep 2023</td>
                        <td>$200</td>
                        <td><span class="status rejected">Rejected</span></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <script>
        function setupCanvas(canvas) {
            const dpr = window.devicePixelRatio || 1;
            const rect = canvas.getBoundingClientRect();
            
            canvas.width = rect.width * dpr;
            canvas.height = rect.height * dpr;
            
            const ctx = canvas.getContext('2d');
            ctx.scale(dpr, dpr);
            return { ctx, width: rect.width, height: rect.height };
        }

        function createBarChart() {
            const data = {
                inbound: [150, 180, 240, 280, 320, 380, 340],
                outbound: [120, 160, 200, 260, 290, 350, 310],
                labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']
            };

            const canvas = document.getElementById('salesChart');
            const tooltip = document.createElement('div');
            tooltip.className = 'chart-tooltip';
            canvas.parentNode.appendChild(tooltip);

            const { ctx, width, height } = setupCanvas(canvas);
            const barWidth = Math.min(40, (width - 100) / (data.labels.length * 2.5));
            const spacing = barWidth / 2;
            
            function draw() {
                ctx.clearRect(0, 0, width, height);
                
                // Draw Y-axis grid lines and labels
                const maxValue = Math.max(...data.inbound, ...data.outbound);
                const gridLines = 5;
                ctx.strokeStyle = '#e5e5e5';
                ctx.fillStyle = '#666';
                ctx.font = '12px sans-serif';
                
                for (let i = 0; i <= gridLines; i++) {
                    const y = height - (height * 0.1) - (height * 0.8 * i / gridLines);
                    const value = Math.round(maxValue * i / gridLines);
                    
                    ctx.beginPath();
                    ctx.moveTo(40, y);
                    ctx.lineTo(width - 40, y);
                    ctx.stroke();
                    ctx.fillText(value, 10, y + 4);
                }

                // Draw bars
                data.labels.forEach((label, index) => {
                    const x = (index * (barWidth * 2 + spacing)) + 60;
                    
                    // Inbound bars
                    const inboundHeight = (data.inbound[index] / maxValue) * height * 0.8;
                    ctx.fillStyle = '#4361ee';
                    ctx.fillRect(
                        x,
                        height - height * 0.1 - inboundHeight,
                        barWidth,
                        inboundHeight
                    );

                    // Outbound bars
                    const outboundHeight = (data.outbound[index] / maxValue) * height * 0.8;
                    ctx.fillStyle = '#3730a3';
                    ctx.fillRect(
                        x + barWidth,
                        height - height * 0.1 - outboundHeight,
                        barWidth,
                        outboundHeight
                    );

                    // X-axis labels
                    ctx.fillStyle = '#666';
                    ctx.fillText(label, x + barWidth - 10, height - 10);
                });

                // Legend
                const legend = [
                    { label: 'Inbound', color: '#4361ee' },
                    { label: 'Outbound', color: '#3730a3' }
                ];
                
                legend.forEach((item, i) => {
                    const x = width - 120;
                    const y = 20 + (i * 25);
                    
                    ctx.fillStyle = item.color;
                    ctx.fillRect(x, y, 15, 15);
                    ctx.fillStyle = '#666';
                    ctx.fillText(item.label, x + 25, y + 12);
                });
            }

            // Interactivity
            canvas.addEventListener('mousemove', (e) => {
                const rect = canvas.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;

                data.labels.forEach((label, index) => {
                    const barX = (index * (barWidth * 2 + spacing)) + 60;
                    const barEndX = barX + barWidth * 2;
                    
                    if (x >= barX && x <= barEndX) {
                        const inValue = data.inbound[index];
                        const outValue = data.outbound[index];
                        
                        tooltip.style.display = 'block';
                        tooltip.style.left = (e.clientX - rect.left + 10) + 'px';
                        tooltip.style.top = (e.clientY - rect.top - 40) + 'px';
                        tooltip.innerHTML = `${label}<br>Inbound: ${inValue}<br>Outbound: ${outValue}`;
                    }
                });
            });

            canvas.addEventListener('mouseleave', () => {
                tooltip.style.display = 'none';
            });

            draw();
            return draw; // Return draw function for resize handling
        }

        function createPieChart() {
            const data = [
                { label: 'Raw Materials', value: 35, color: '#4361ee' },
                { label: 'Finished Goods', value: 40, color: '#3f37c9' },
                { label: 'Packaging', value: 15, color: '#3730a3' },
                { label: 'Reserved', value: 10, color: '#312e81' }
            ];

            const canvas = document.getElementById('categoryChart');
            const tooltip = document.createElement('div');
            tooltip.className = 'chart-tooltip';
            canvas.parentNode.appendChild(tooltip);

            const { ctx, width, height } = setupCanvas(canvas);
            const centerX = width / 2;
            const centerY = height / 2;
            const radius = Math.min(centerX, centerY) * 0.7;

            function draw() {
                ctx.clearRect(0, 0, width, height);
                
                let startAngle = 0;
                const total = data.reduce((sum, item) => sum + item.value, 0);

                // Draw segments
                data.forEach(item => {
                    const sliceAngle = (2 * Math.PI * item.value) / total;

                    ctx.beginPath();
                    ctx.fillStyle = item.color;
                    ctx.moveTo(centerX, centerY);
                    ctx.arc(centerX, centerY, radius, startAngle, startAngle + sliceAngle);
                    ctx.closePath();
                    ctx.fill();

                    // Store angles for interactivity
                    item.startAngle = startAngle;
                    item.endAngle = startAngle + sliceAngle;
                    startAngle += sliceAngle;
                });

                // Donut hole
                ctx.beginPath();
                ctx.fillStyle = 'white';
                ctx.arc(centerX, centerY, radius * 0.6, 0, 2 * Math.PI);
                ctx.fill();

                // Legend
                const legendY = height - (data.length * 30);
                data.forEach((item, i) => {
                    ctx.fillStyle = item.color;
                    ctx.fillRect(centerX - 80, legendY + (i * 25), 15, 15);
                    ctx.fillStyle = '#666';
                    ctx.font = '14px sans-serif';
                    ctx.fillText(
                        `${item.label} (${item.value}%)`,
                        centerX - 60,
                        legendY + (i * 25) + 12
                    );
                });
            }

            // Interactivity
            canvas.addEventListener('mousemove', (e) => {
                const rect = canvas.getBoundingClientRect();
                const x = e.clientX - rect.left - centerX;
                const y = e.clientY - rect.top - centerY;
                const distance = Math.sqrt(x * x + y * y);
                
                if (distance <= radius && distance >= radius * 0.6) {
                    const angle = Math.atan2(y, x) + Math.PI / 2;
                    const normalizedAngle = angle < 0 ? angle + 2 * Math.PI : angle;

                    data.forEach(item => {
                        if (normalizedAngle >= item.startAngle && normalizedAngle <= item.endAngle) {
                            tooltip.style.display = 'block';
                            tooltip.style.left = (e.clientX - rect.left + 10) + 'px';
                            tooltip.style.top = (e.clientY - rect.top - 40) + 'px';
                            tooltip.textContent = `${item.label}: ${item.value}%`;
                        }
                    });
                } else {
                    tooltip.style.display = 'none';
                }
            });

            canvas.addEventListener('mouseleave', () => {
                tooltip.style.display = 'none';
            });

            draw();
            return draw;
        }

        // Initialize and handle resize
        let drawBarChart, drawPieChart;
        
        window.addEventListener('load', () => {
            drawBarChart = createBarChart();
            drawPieChart = createPieChart();
        });

        window.addEventListener('resize', () => {
            if (drawBarChart) drawBarChart();
            if (drawPieChart) drawPieChart();
        });
    </script>
</body>
</html>
